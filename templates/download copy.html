<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文件下载</title>
    <script>
        // 当页面加载完成后检查URL中的消息参数
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const message = urlParams.get('message');
            if (message) {
                alert(message);  // 弹出消息
            }
        };
    </script>
</head>
<body>
    <h1>下载文件</h1>
    <ul>
        {% for code, file in files_with_codes.items() %}
        <li>
            <span>取件码: {{ code }} - 文件: <a href="/download/{{ file }}">{{ file }}</a></span>
            <form action="/delete/{{ file }}" method="POST" style="display:inline;">
                <button type="submit" onclick="return confirm('确定要删除这个文件吗？')">删除</button>
            </form>
        </li>
        {% endfor %}
    </ul>
    <a href="/">返回上传页面</a>
</body>
</html>